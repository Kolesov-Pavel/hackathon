<!DOCTYPE html>
<html>
<head>
  <title>Sentinel-2: Дороги и здания</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <style>
    #map { width: 800px; height: 600px; margin: 20px auto; border: 1px solid #ccc; }
    h2 { text-align: center; font-family: Arial, sans-serif; }
  </style>
</head>
<body>
  <h2>Карта Sentinel-2: Дороги и здания (сегодня)</h2>
  <div id="map"></div>

  <script>
    // Координаты метки (72.21289063, 60.49416733)
    const markerCoords = [60.49416733, 72.21289063];
    
    // Сегодняшняя дата (формат YYYY-MM-DD)
    const today = new Date();
    const dateStr = today.toISOString().split('T')[0];

    // Инициализация карты
    const map = L.map('map').setView(markerCoords, 12);

    // Стиль SWIR для инфраструктуры (B12, B11, B4)
    const urbanStyle = `https://services.sentinel-hub.com/ogc/wms/10084d2d-cc90-4fd3-8c37-8c6f72f892b9?` +
      `SERVICE=WMS` +
      `&REQUEST=GetMap` +
      `&LAYERS=SWIR` +  // Используем SWIR-каналы
      `&BBOX=72.1,60.4,72.3,60.6` +  // Более точный bbox
      `&WIDTH=800` +
      `&HEIGHT=600` +
      `&TIME=${dateStr}` +  // Сегодняшняя дата
      `&FORMAT=image/png` +
      `&SHOWLOGO=false`;

    L.tileLayer(urbanStyle, {
      attribution: 'Sentinel-2 © ESA/Sentinel Hub'
    }).addTo(map);

    // Добавляем метку
    L.marker(markerCoords)
      .addTo(map)
      .bindPopup(`<b>Координаты:</b> 72.21289063, 60.49416733<br><b>Дата:</b> ${dateStr}`)
      .openPopup();

    // Опционально: добавляем слой OSM для сравнения
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap'
    }).addTo(map);
  </script>
</body>
</html>
